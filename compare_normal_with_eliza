import openai
import time

openai.api_key = input("Please enter an Open AI API Key: ");

def get_response (prompt, role_desc="You are a helpful assistant."):
    start = time.time()
    response = openai.ChatCompletion.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": role_desc},
            {"role": "user", "content": prompt}
        ],
        temperature=0.7,
        max_tokens=150
    )
    end = time.time()
    elapsed = end - start
    return response['choices'][0]['message']['content'].strip(), elapsed

def eliza_vs_regular (user_input):
    eliza_role = "You are ELIZA, a Rogerian therapist. Reflect the user's statements, ask open-ended questions, avoid giving advice, and stay in character."
    normal_role = "You are a helpful and intelligent assistant."

    # ELIZA response
    eliza_response, eliza_time = get_response(user_input, role_desc=eliza_role)

    # regular
    regular_response, regular_time = get_response(user_input, role_desc=normal_role)

    # output
    print(f"\nUser Input: {user_input}\n")
    print(f"ELIZA Response ({eliza_time:.2f}s):\n{eliza_response}\n")
    print(f"Regular Response ({regular_time:.2f}s):\n{regular_response}\n")
    print(f"‚è± Time Difference: {abs(eliza_time - regular_time):.2f} seconds\n")
